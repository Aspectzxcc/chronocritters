syntax = "proto3";

package chronocritters.player;

option java_package = "com.chronocritters.proto.player";
option java_outer_classname = "PlayerProto";

enum CritterTypeProto {
  CRITTER_TYPE_UNSPECIFIED = 0;
  FIRE = 1;
  WATER = 2;
  GRASS = 3;
  ELECTRIC = 4;
  METAL = 5;
  TOXIC = 6;
  KINETIC = 7;
}

enum EffectTypeProto {
  EFFECT_TYPE_UNSPECIFIED = 0;
  DAMAGE = 1;
  DAMAGE_OVER_TIME = 2;
  SKIP_TURN = 3;
  BUFF = 4;
  DEBUFF = 5;
}

service PlayerService {
  rpc GetPlayer(PlayerRequest) returns (PlayerResponse);
  rpc UpdateMatchHistory(MatchHistoryRequest) returns (MatchHistoryResponse);
}

message PlayerRequest {
  string player_id = 1;
}

message PlayerResponse {
  string id = 1;
  string username = 2;
  repeated CritterProto roster = 4;
}

message PlayerStatsProto {
  int32 wins = 1;
  int32 losses = 2;
}

message CritterProto {
  string id = 1;
  string name = 2;
  CritterTypeProto type = 3;
  BaseStatsProto base_stats = 4;
  repeated AbilityProto abilities = 5;
}

message BaseStatsProto {
  int32 health = 1;
  int32 attack = 2;
  int32 defense = 3;
}

message AbilityProto {
  string id = 1;
  string name = 2;
  repeated EffectProto effects = 5;
}

message EffectProto {
  string id = 1;
  EffectTypeProto type = 2;
  oneof effect_data {
    DamageEffectProto damage_effect = 3;
    DamageOverTimeEffectProto damage_over_time_effect = 4;
  }
}

message DamageEffectProto {
  int32 damage = 1;
}

message DamageOverTimeEffectProto {
  int32 damage_per_turn = 1;
  int32 duration = 2;
}

message MatchHistoryRequest {
  string winning_player_id = 1;
  string losing_player_id = 2;
}

message MatchHistoryResponse {
  bool success = 1;
  string message = 2;
}